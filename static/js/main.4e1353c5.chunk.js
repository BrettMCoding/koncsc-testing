(this.webpackJsonpnovitas_cs=this.webpackJsonpnovitas_cs||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);a(67),a(68);var n=a(0),r=a.n(n),l=a(25),c=a(22),s=a(24),o=a(11),i=a(12),u=a(16),m=a(15),h=a(17),p=a(123),d=a(124),g=a(125),f=a(6),k=a(13),E=a.n(k),y=new(function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,[{key:"executeBasicAuthenticationService",value:function(e,t){return E.a.get("".concat("https://konrest-remote-testing.herokuapp.com","/auth"),{headers:{authorization:this.createBasicAuthToken(e,t)}})}},{key:"createBasicAuthToken",value:function(e,t){return"Basic "+window.btoa(e+":"+t)}},{key:"registerSuccessfulLogin",value:function(e,t){sessionStorage.setItem("authenticatedUser",e),console.log("you are now logged in as: "),console.log(sessionStorage.getItem("authenticatedUser")),console.log("\n\n\n\n\n"),sessionStorage.setItem("USER_TOKEN",this.createBasicAuthToken(e,t)),this.setupAxiosInterceptors(sessionStorage.getItem("USER_TOKEN"))}},{key:"logout",value:function(){sessionStorage.removeItem("authenticatedUser")}},{key:"isUserLoggedIn",value:function(){return null!==sessionStorage.getItem("authenticatedUser")}},{key:"getLoggedInUserName",value:function(){var e=sessionStorage.getItem("authenticatedUser");return null===e?"":e}},{key:"setupAxiosInterceptors",value:function(e){var t=this;E.a.interceptors.request.use((function(a){return t.isUserLoggedIn()&&(a.headers.authorization=e),a}))}}]),e}()),v=a(20);var b=function(e){var t="https://brettmcoding.github.io/koncsc",a=Object(n.useState)(""),l=Object(f.a)(a,2),c=l[0],s=l[1],o=Object(n.useState)(""),i=Object(f.a)(o,2),u=i[0],m=i[1],h=Object(n.useState)(!1),p=Object(f.a)(h,2),d=p[0],g=p[1],k=Object(n.useState)(!1),E=Object(f.a)(k,2),b=E[0],C=E[1],S=Object(v.d)();return r.a.createElement("div",null,!e.isUserLoggedIn&&r.a.createElement("div",{className:"container form-group d-flex flex-column"},r.a.createElement("h1",{className:"text-center"},"Login"),d&&r.a.createElement("div",{className:"alert alert-warning"},"Invalid Credentials"),b&&r.a.createElement("div",{className:"alert alert-success text-center"},"Login Successful"),"Email: ",r.a.createElement("input",{type:"text",className:"form-control",name:"email",value:c,onChange:function(e){return s(e.target.value)}}),"Password: ",r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{className:"btn btn-lg btn-success p-1 mt-3 mb-2",onClick:function(){y.executeBasicAuthenticationService(c,u).then((function(){y.registerSuccessfulLogin(c,u),S.show("Login Successful",{type:"success",timeout:5e3}),e.toggleModal(),e.getUserLoggedInProp(y.isUserLoggedIn()),e.loadCharacterList()})).catch((function(){C(!1),g(!0)}))}},"Login"),r.a.createElement("div",null,r.a.createElement("a",{href:t+"/#/register",className:"btn btn-outline-secondary text-center"},"Create account"),r.a.createElement("a",{href:t+"/#/forgot",className:"btn btn-outline-secondary text-center"},"Forgot your password?"))))};function C(e){var t=Object(v.d)();return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-danger",onClick:function(){y.logout(),t.show("Logout Successful",{type:"success",timeout:5e3}),e.getUserLoggedInProp(y.isUserLoggedIn())}},"Logout"))}var S=a(116),N=a(117),O=a(118),x=a(119),P=a(120),j=a(121),w=a(60),I=a(127),L=a(128),A=a(129),R=a(126),T=a(122),B=a(114),_=a(115),F=a(33),U=a(61);function H(e){return e.characterList.map((function(t){return r.a.createElement("div",{className:"character-list-slot btn-success btn-sm",id:t.id,onClick:function(){e.setCurrentConfirmationModal(e.handleCharacter,e.message+t.characterName+")",t.id)}},t.characterName,".\xa0",r.a.createElement("br",null),"Level\xa0",t.level,"\xa0",t.race)}))}function M(e){return r.a.createElement("div",null,r.a.createElement(R.a,{isOpen:e.confirmationModalIsOpen,toggle:e.toggleConfirmationModalIsOpen},r.a.createElement(B.a,null,e.message),r.a.createElement(_.a,null,r.a.createElement(w.a,{className:" m-auto w-50 ",color:"secondary",onClick:e.toggleConfirmationModalIsOpen},"Cancel"),r.a.createElement(w.a,{className:" m-auto w-50 ",color:"success",onClick:function(){e.handleCharacter(e.id,e.alert),e.toggleConfirmationModalIsOpen()}},"Confirm"))))}var D=function(e){var t=Object(n.useState)(!1),a=Object(f.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(!1),o=Object(f.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(!1),h=Object(f.a)(m,2),p=h[0],d=h[1],g=Object(n.useState)(!1),k=Object(f.a)(g,2),E=k[0],D=k[1],X=Object(v.d)(),q=function(){return u(!se&&!i)},G=function(){d(!p)},V=function(){D(!E)},K=Object(n.useState)(""),Y=Object(f.a)(K,2),J=Y[0],z=Y[1],W=Object(n.useState)(""),Q=Object(f.a)(W,2),Z=Q[0],$=Q[1],ee=Object(n.useState)(null),te=Object(f.a)(ee,2),ae=te[0],ne=te[1],re=function(e,t,a){z((function(){return e})),$(t),ne(a),V()},le=Object(n.useState)(y.isUserLoggedIn()),ce=Object(f.a)(le,2),se=ce[0],oe=ce[1],ie=function(e){oe(e)},ue=function(e){return r.a.createElement("div",{className:"align-items-center d-flex"},r.a.createElement(U.Transition,{items:se,from:{opacity:0},enter:{opacity:1},leave:{opacity:0}},(function(t){return t&&function(t){return r.a.createElement(F.a.div,{style:t},e)}})))};return r.a.createElement("div",null,r.a.createElement(S.a,{className:"navbar navbar-dark",light:!0,expand:"md"},r.a.createElement(N.a,{onClick:function(){return c(!l)}}),r.a.createElement(O.a,{isOpen:l,navbar:!0},r.a.createElement(x.a,{className:"mr-auto",navbar:!0},r.a.createElement(P.a,{className:"align-items-center d-flex"},r.a.createElement(j.a,{href:"http://kingdomsofnovitas.net/"},"kingdomsofnovitas.net")),r.a.createElement(P.a,{className:"align-items-center d-flex"},r.a.createElement(j.a,{href:"https://www.facebook.com/groups/KingdomsOfNovitas/"},"Facebook")),r.a.createElement(P.a,null,r.a.createElement(j.a,null,r.a.createElement("button",{className:"navButton",onClick:G},"Reset Skills"))),r.a.createElement(P.a,null,r.a.createElement(j.a,null,r.a.createElement("button",{className:"navButton",onClick:e.lockChanges},e.locked?"Unl":"L","ock Editing"))),r.a.createElement(P.a,{className:"align-items-center d-flex"},se&&r.a.createElement(C,{getUserLoggedInProp:ie}),!se&&r.a.createElement(w.a,{color:"success",onClick:q},"Login")),ue(r.a.createElement(P.a,null,r.a.createElement(I.a,{nav:!0,inNavbar:!0},r.a.createElement(L.a,{nav:!0,caret:!0},"Save"),r.a.createElement(A.a,{right:!0},r.a.createElement(H,{characterList:e.characterList,handleCharacter:e.saveCharacter,setCurrentConfirmationModal:re,message:"Are you sure you want to save this character? (Character in slot: "}),r.a.createElement("div",{className:"character-list-slot btn-success btn-sm",onClick:function(){re(e.saveCharacter,"Are you sure you want to save a new character?")}},"New Character"))))),ue(r.a.createElement(P.a,null,r.a.createElement(I.a,{nav:!0,inNavbar:!0},r.a.createElement(L.a,{nav:!0,caret:!0},"Load"),r.a.createElement(A.a,{right:!0},r.a.createElement(H,{characterList:e.characterList,handleCharacter:e.loadCharacter,setCurrentConfirmationModal:re,message:"Are you sure you want to load this character? (Character: "}))))),ue(r.a.createElement(P.a,null,r.a.createElement(I.a,{nav:!0,inNavbar:!0},r.a.createElement(L.a,{nav:!0,caret:!0},"Delete"),r.a.createElement(A.a,{right:!0},r.a.createElement(H,{characterList:e.characterList,handleCharacter:e.deleteCharacter,setCurrentConfirmationModal:re,message:"Are you sure you want to load this character? (Character: "}))))))),r.a.createElement(R.a,{isOpen:i,toggle:q},r.a.createElement(T.a,{toggle:q},"Login"),r.a.createElement(B.a,null,r.a.createElement(b,{isUserLoggedIn:se,getUserLoggedInProp:ie,toggleModal:q,loadCharacterList:e.loadCharacterList})),r.a.createElement(_.a,null,r.a.createElement(w.a,{className:" m-auto w-50 ",color:"secondary",onClick:q},"Cancel"))),r.a.createElement(R.a,{isOpen:p,toggle:G},r.a.createElement(B.a,null,r.a.createElement("div",null,"Are you sure you want to reset your skills? (Unsaved changes will be lost)")),r.a.createElement(_.a,null,r.a.createElement(w.a,{className:" m-auto w-50 ",color:"secondary",onClick:e.toggleConfirmationModalIsOpen},"Cancel"),r.a.createElement(w.a,{className:" m-auto w-50 ",color:"success",onClick:function(){e.resetSkills(),G()}},"Reset Skills"))),r.a.createElement(M,{confirmationModalIsOpen:E,toggleConfirmationModalIsOpen:V,handleCharacter:J,message:Z,id:ae,alert:X})))},X=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement("div",{className:"header-title"},r.a.createElement("h1",null,"KINGDOMS OF NOVITAS"),r.a.createElement("h2",null,"Online Character Sheet | Skill Calculator")),r.a.createElement(D,{lockChanges:this.props.lockChanges,resetSkills:this.props.resetSkills,locked:this.props.locked,saveCharacter:this.props.saveCharacter,loadCharacter:this.props.loadCharacter,deleteCharacter:this.props.deleteCharacter,characterList:this.props.characterList,loadCharacterList:this.props.loadCharacterList})))}}]),t}(r.a.Component);var q=function(e){return r.a.createElement("div",null,e.displayName,":",r.a.createElement("br",null),"\xa0",r.a.createElement("input",{type:"text",placeholder:e.placeholder,maxLength:e.maxLength,value:e.infoValue,disabled:e.lockChanges,onChange:function(t){e.characterInfoChange(e.infoName,t.target.value)}}))},G=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(p.a,null,r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement("div",{className:"characterinfo-box"},r.a.createElement("div",{className:"characterinfo-content"},r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement(q,{className:"inputbox",displayName:"Character Name",infoName:"characterName",infoValue:this.props.characterName,maxLength:"33",placeholder:"Enter a Character Name",characterInfoChange:this.props.characterInfoChange,lockChanges:this.props.lockChanges}))),r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement(q,{className:"inputbox",displayName:"Race",infoName:"race",infoValue:this.props.race,maxLength:"33",placeholder:"Enter a Race",characterInfoChange:this.props.characterInfoChange})),r.a.createElement(g.a,null,r.a.createElement(q,{className:"inputbox",displayName:"Country",infoName:"country",infoValue:this.props.country,maxLength:"33",placeholder:"Enter a Country",characterInfoChange:this.props.characterInfoChange}))),r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement(q,{className:"inputbox",displayName:"Player",infoName:"player",infoValue:this.props.player,maxLength:"33",placeholder:"Enter a player name",characterInfoChange:this.props.characterInfoChange})),r.a.createElement(g.a,null,r.a.createElement(q,{className:"inputbox",displayName:"Level",infoName:"level",infoValue:this.props.level,maxLength:"3",placeholder:"1",characterInfoChange:this.props.characterInfoChange}))),r.a.createElement(d.a,null,r.a.createElement(g.a,null,r.a.createElement("div",{className:"skillpointsremaining"},"Skill Points Remaining: ",r.a.createElement("div",{className:"mock-input"},"\xa0\xa0",this.props.calculateSkillPointsRemaining()))),r.a.createElement(g.a,null,r.a.createElement(q,{className:"inputbox",displayName:"Saved XP",infoName:"savedXp",infoValue:this.props.savedXp,maxLength:"3",placeholder:"0",characterInfoChange:this.props.characterInfoChange})))))))))}}]),t}(n.Component);function V(e){var t=e.props,a=t.removeResource,n=t.addResource,l=t.lockChanges,c=e.resourceName,s=e.resource,o=e.max,i=e.skillCss,u=e.cost,m=e.displayName,h=Object(F.b)({width:s?s*(20===o?5:10)+"%":"0%"}),p=function(){return r.a.createElement("div",{className:"progress-bar"},r.a.createElement("div",{className:"bar-text"},m,": ",s," / ",o),r.a.createElement(g,null))},g=function(){return r.a.createElement(F.a.div,{className:"filler "+i,style:h})};return function(e){return void 0===e?r.a.createElement("div",null,"Loading..."):r.a.createElement(d.a,{className:"d-flex flex-nowrap justify-content-center rscrow"},r.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm rscbtn",disabled:l,onClick:function(){a(c)}},"-"),r.a.createElement(p,null),r.a.createElement("button",{type:"button",className:"btn btn-success btn-sm rscbtn",disabled:l,onClick:function(){n(c,u,o)}},"+"),r.a.createElement("div",{className:"resource-cost"},u))}(s)}function K(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"resourcebox"},r.a.createElement("h3",{className:"resources"},"Resources"),r.a.createElement(V,{props:e,displayName:"Magic Power",cost:e.MAGIC_POINT_COST,max:20,resourceName:"magicPoints",resource:e.resources.magicPoints,skillCss:"magic"}),r.a.createElement(V,{props:e,displayName:"Production",cost:e.PRODUCTION_POINT_COST,max:10,resourceName:"productionPoints",resource:e.resources.productionPoints,skillCss:"production"}),r.a.createElement(V,{props:e,displayName:"Craft",cost:e.CRAFT_POINT_COST,max:10,resourceName:"craftPoints",resource:e.resources.craftPoints,skillCss:"craft"})))}var Y=a(41),J=a(34);var z=function(e){var t=function(e){return void 0!==e&&a(e)},a=function(t){return t.some((function(t){return t.id===e.skill.id}))},n=t(e.playerSkills)?" checked":"";return r.a.createElement("div",{className:"skill row d-flex flex-nowrap"+n},r.a.createElement("div",{className:"skillBody col pl-1"+n},r.a.createElement("p",null,r.a.createElement("input",{disabled:e.lockChanges,type:"checkbox",checked:t(e.playerSkills),onChange:function(t){e.playerCheckedASkillBox(e.skill,t.target.checked)}})," "," ",(e.skill.name,2===e.skill.tier?"  ":3===e.skill.tier?"    ":4===e.skill.tier?"      ":5===e.skill.tier?"        ":void 0),e.skill.name)),r.a.createElement("div",{className:"skillCost d-inline-flex flex-nowrap pr-1"},e.skill.cost))};function W(e){var t=Object(n.useState)(!1),a=Object(f.a)(t,2),l=a[0],c=a[1],s=function(){return c(!l)},o=e.skills.length,i=e.skills.map((function(t){return r.a.createElement(z,{key:t.id,skill:t,playerCheckedASkillBox:e.playerCheckedASkillBox,lockChanges:e.lockChanges,playerSkills:e.playerSkills})}));return r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement("button",{className:"btn-sm btn-dark float-left",onClick:s},r.a.createElement(Y.a,{icon:l?J.b:J.a})),e.treeName," ",e.playerSkills.filter((function(t){return t.tree===e.treeName.toLowerCase()})).length," / ",o,r.a.createElement("button",{className:"btn-sm btn-dark float-right",onClick:s},r.a.createElement(Y.a,{icon:l?J.b:J.a}))),r.a.createElement(O.a,{isOpen:l},i))}var Q=a(63),Z=a(28);function $(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(f.a)(c,2),o=s[0],i=s[1],u=Object(n.useState)(!1),m=Object(f.a)(u,2),h=m[0],p=m[1],d=Object(n.useState)(""),g=Object(f.a)(d,2),k=g[0],y=g[1];Object(n.useEffect)((function(){document.title="Register Account"}),[]);return r.a.createElement("div",null,r.a.createElement("div",{className:"container form-group d-flex flex-column"},r.a.createElement("h1",{className:"text-center"},"Register New User"),o&&r.a.createElement("div",{className:"alert alert-warning"},"Error: "+k),h&&r.a.createElement("div",{className:"alert alert-success text-center"},"Registration Successful. A confirmation email has been sent to the provided email address. Please click the activation link in the email to continue"),!h&&r.a.createElement(r.a.Fragment,null,"Email: ",r.a.createElement("input",{type:"text",className:"form-control",name:"email",value:a,onChange:function(e){return l(e.target.value)}}),r.a.createElement("button",{className:"btn btn-lg btn-success p-1 mt-3 mb-2",onClick:function(e){e.persist(),function(e){E.a.post("https://konrest-remote-testing.herokuapp.com/register",{email:e}).then((function(e){console.log(e),p(!0),i(!1)})).catch((function(e){y(e.response.data),i(!0)}))}(a)}},"Register")),r.a.createElement("a",{href:"https://brettmcoding.github.io/koncsc",className:"text-center m-auto w-50 btn btn-secondary"},"Back to homepage")))}function ee(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)(""),o=Object(f.a)(s,2),i=o[0],u=o[1],m=Object(n.useState)(!1),h=Object(f.a)(m,2),p=h[0],d=h[1],g=Object(n.useState)(!1),k=Object(f.a)(g,2),y=k[0],v=k[1],b=Object(n.useState)(""),C=Object(f.a)(b,2),S=C[0],N=C[1];Object(n.useEffect)((function(){document.title="Enter New Password"}),[]);console.log(e);return r.a.createElement("div",null,r.a.createElement("div",{className:"container form-group d-flex flex-column"},r.a.createElement("h1",{className:"text-center"},"Enter New Password"),p&&r.a.createElement("div",{className:"alert alert-warning"},"Error: "+S),y&&r.a.createElement("div",{className:"alert alert-success text-center"},"Password accepted. You may now log in normally. Thank you."),!y&&r.a.createElement(r.a.Fragment,null,"Password: ",r.a.createElement("input",{type:"password",className:"form-control",name:"password",value:l,onChange:function(e){return c(e.target.value)}}),"Confirm Password: ",r.a.createElement("input",{type:"password",className:"form-control",name:"password2",value:i,onChange:function(e){return u(e.target.value)}}),r.a.createElement("button",{className:"btn btn-lg btn-success p-1 mt-3 mb-2",onClick:function(t){t.persist(),function(t,a){E.a.post("https://konrest-remote-testing.herokuapp.com/confirm?token="+e.match.params.token,{p1:t,p2:a}).then((function(e){console.log(e),v(!0),d(!1)})).catch((function(e){N(e.response.data),d(!0)}))}(l,i)}},"Submit")),r.a.createElement("a",{href:"https://brettmcoding.github.io/koncsc",className:"text-center m-auto w-50 btn btn-secondary"},"Back to homepage")))}function te(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),s=Object(f.a)(c,2),o=s[0],i=s[1],u=Object(n.useState)(!1),m=Object(f.a)(u,2),h=m[0],p=m[1],d=Object(n.useState)(""),g=Object(f.a)(d,2),k=g[0],y=g[1];Object(n.useEffect)((function(){document.title="Forgot Password"}),[]);return r.a.createElement("div",null,r.a.createElement("div",{className:"container form-group d-flex flex-column"},r.a.createElement("h1",{className:"text-center"},"Forgot Password?"),o&&r.a.createElement("div",{className:"alert alert-warning"},"Error: "+k),h&&r.a.createElement("div",{className:"alert alert-success text-center"},"An email has been sent to the provided email address. Please click the forgot password link in the email to continue"),!h&&r.a.createElement(r.a.Fragment,null,"Email: ",r.a.createElement("input",{type:"text",className:"form-control",name:"email",value:a,onChange:function(e){return l(e.target.value)}}),r.a.createElement("button",{className:"btn btn-lg btn-success p-1 mt-3 mb-2",onClick:function(e){e.persist(),function(e){E.a.post("https://konrest-remote-testing.herokuapp.com/forgot",{email:e}).then((function(e){console.log(e),p(!0),i(!1)})).catch((function(e){y(e.response.data),i(!0)}))}(a)}},"Submit")),r.a.createElement("a",{href:"https://brettmcoding.github.io/koncsc",className:"text-center m-auto w-50 btn btn-secondary"},"Back to homepage")))}function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ne(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var re=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={id:"",characterName:"",country:"",player:"",race:"",level:1,savedXp:0,playerHasSkill:[],characterList:[],resources:{magicPoints:0,craftPoints:0,productionPoints:0},MAGIC_POINT_COST:1,CRAFT_POINT_COST:2,PRODUCTION_POINT_COST:1,locked:!1,loadingSkills:!1,combat:[],general:[],production:[],roleplaying:[],aegis:[],battle:[],nature:[],necromancy:[],compulsion:[],restoration:[],enchantment:[]},a.sortSkillsByTree=function(e){var t=function(t){var n=function(n){t===e[n].tree&&a.setState((function(a){return Object(c.a)({},t,[].concat(Object(s.a)(a[t]),[e[n]]))}))};for(var r in e)n(r)};for(var n in a.state)t(n)},a.saveLocalCharacter=function(){var e=a.state,t={characterName:e.characterName,player:e.player,race:e.race,country:e.country,level:e.level,savedXp:e.savedXp,magicPoints:e.resources.magicPoints,craftPoints:e.resources.craftPoints,productionPoints:e.resources.productionPoints,skills:e.playerHasSkill};localStorage.setItem("character",JSON.stringify(t))},a.loadLocalCharacter=function(){var e=JSON.parse(localStorage.getItem("character"));a.setState((function(t){return ne({},t,{characterName:e.characterName,player:e.player,race:e.race,country:e.country,level:e.level,savedXp:e.savedXp,magicPoints:e.magicPoints,craftPoints:e.craftPoints,productionPoints:e.productionPoints,playerHasSkill:e.skills})}))},a.loadCharacterList=function(){return E()({method:"get",url:"https://konrest-remote-testing.herokuapp.com/characters"}).then((function(e){a.setState((function(){return{characterList:Object(s.a)(e.data)}}))})).catch((function(e){alert.show(e.response.data,{timeout:5e3,type:"error"})}))},a.saveCharacter=function(e,t){var n=a.state,r={id:e,characterName:n.characterName,player:n.player,race:n.race,country:n.country,level:n.level,savedXp:n.savedXp,magicPoints:n.resources.magicPoints,craftPoints:n.resources.craftPoints,productionPoints:n.resources.productionPoints,skills:n.playerHasSkill};return E()({method:"post",url:"https://konrest-remote-testing.herokuapp.com/character",data:r}).then((function(e){a.loadCharacterList(),t.show("Character Saved",{timeout:5e3,type:"success"})})).catch((function(e){t.show(e.response.data,{timeout:5e3,type:"error"})}))},a.loadCharacter=function(e,t){return E()({method:"get",url:"https://konrest-remote-testing.herokuapp.com/character",params:{id:e}}).then((function(e){var n={magicPoints:e.data.magicPoints,productionPoints:e.data.productionPoints,craftPoints:e.data.craftPoints};a.setState((function(t){return ne({},t,{id:e.data.id,characterName:e.data.characterName,race:e.data.race,player:e.data.player,country:e.data.country,level:e.data.level,savedXp:e.data.savedXp,resources:n,playerHasSkill:e.data.skills})})),t.show("Character Loaded",{timeout:5e3,type:"success"})})).catch((function(e){t.show(e.response.data,{timeout:5e3,type:"error"})}))},a.deleteCharacter=function(e,t){return E()({method:"delete",url:"https://konrest-remote-testing.herokuapp.com/character",params:{id:e}}).then((function(e){a.loadCharacterList(),t.show("Character Deleted",{timeout:5e3,type:"success"})})).catch((function(e){t.show(e.response.data,{timeout:5e3,type:"error"})}))},a.resetSkills=function(){a.setState({playerHasSkill:[],resources:{magicPoints:0,craftPoints:0,productionPoints:0}}),a.calculateSkillPointsRemaining(),a.props.alert.show("Skills Reset",{timeout:5e3,type:"success"})},a.characterInfoChange=function(e,t){a.setState(Object(c.a)({},e,t),(function(){this.calculateSkillPointsRemaining()}))},a.calculateBaseSkillPoints=function(){return 1===a.state.level?4:2*a.state.level+4},a.calculateSkillPointsRemaining=function(){var e=a.calculateBaseSkillPoints();return e-=a.calculateSpentSkillPoints()},a.calculateSpentSkillPoints=function(){var e=0,t=a.state.playerHasSkill,n=a.state.resources;for(var r in t)e+=t[r].cost;return e+=n.craftPoints*a.state.CRAFT_POINT_COST+n.productionPoints*a.state.PRODUCTION_POINT_COST+n.magicPoints*a.state.MAGIC_POINT_COST},a.checkRequirements=function(e){var t=e.requires;if(""===t||null===t)return!0;var n=a.state.playerHasSkill;for(var r in n)if(t.includes(n[r].name))return!0;return!1},a.playerCheckedASkillBox=function(e,t){return console.log("pulled branch from remote-testing OK"),a.checkRequirements(e)?t?a.calculateSkillPointsRemaining()-e.cost<0?(a.props.alert.show("You do not have enough skill points for "+e.name,{timeout:5e3,type:"error"}),!1):!!a.canPlayerGetThisRoleplayingSkill(e)&&a.addSkill(e):!!a.skillIsRequired(e)||a.removeSkill(e):(a.props.alert.show("You do not meet the requirements for "+e.name,{timeout:5e3,type:"error"}),!1)},a.canPlayerGetThisRoleplayingSkill=function(e){var t=a.state.playerHasSkill.filter((function(e){return"roleplaying"===e.tree}));if(2===t.filter((function(e){return e.name.includes("1")})).length&&e.name.includes("1"))return a.props.alert.show("You cannot have more than two types of roleplaying skills",{timeout:5e3,type:"error"}),!1;var n=t.filter((function(e){return e.name.includes(3)}));return 0===n.length||!e.name.includes(3)||1!==n.length||(a.props.alert.show("You cannot have more than one roleplaying skill above 2nd level",{timeout:5e3,type:"error"}),!1)},a.skillIsRequired=function(e){var t=a.state.playerHasSkill;for(var n in t){var r=t[n].requires;if(""!==r&&null!==r&&r.includes(e.name)){if(r.includes("|"))for(var l in t)if(""!==r&&null!==r&&e.name!==t[l].name&&r.includes(t[l].name))return!1;return a.props.alert.show("Cannot remove "+e.name+". It is a prerequisite for "+t[n].name,{timeout:5e3,type:"error"}),!0}}return!1},a.addResource=function(e,t,n){if(a.calculateSkillPointsRemaining()-t<0)return a.props.alert.show("You do not have enough skill points",{type:"error"}),!1;if(a.state.resources[e]>=n)return!1;var r=a.state.resources;return r[e]+=1,a.setState({resources:r},(function(){a.calculateSkillPointsRemaining()})),!0},a.removeResource=function(e){if(0===a.state.resources[e])return!1;var t=a.state.resources;t[e]-=1,a.setState({resources:t})},a.addSkill=function(e){return a.setState((function(t){return{playerHasSkill:[].concat(Object(s.a)(t.playerHasSkill),[e])}}),(function(){this.calculateSkillPointsRemaining()})),!0},a.removeSkill=function(e){return a.setState((function(t){return{playerHasSkill:t.playerHasSkill.filter((function(t){return t.name!==e.name}))}}),(function(){this.calculateSkillPointsRemaining()})),!1},a.lockChanges=function(){a.props.alert.show("Character editing "+(a.state.locked?"unl":"l")+"ocked"),a.setState((function(e){return{locked:!e.locked}})),a.calculateSkillPointsRemaining()},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.title="Kingdoms of Novitas | Character Sheet",y.isUserLoggedIn()&&(y.setupAxiosInterceptors(sessionStorage.getItem("USER_TOKEN")),this.loadCharacterList()),this.setState({loadingSkills:!0});var t=[];E.a.get("https://konrest-remote-testing.herokuapp.com/skills").then((function(a){t=Object(s.a)(a.data),e.sortSkillsByTree(t),e.setState({loadingSkills:!1})})),null!==localStorage.getItem("character")&&this.loadLocalCharacter()}},{key:"componentDidUpdate",value:function(){this.saveLocalCharacter()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Q.a,null,r.a.createElement(Z.c,null,r.a.createElement(Z.a,{exact:!0,path:"/"},r.a.createElement(X,{lockChanges:this.lockChanges,resetSkills:this.resetSkills,locked:this.state.locked,saveCharacter:this.saveCharacter,loadCharacter:this.loadCharacter,deleteCharacter:this.deleteCharacter,characterList:this.state.characterList,loadCharacterList:this.loadCharacterList,staate:this.state}),r.a.createElement(G,{level:this.state.level,characterName:this.state.characterName,country:this.state.country,player:this.state.player,race:this.state.race,savedXp:this.state.savedXp,characterInfoChange:this.characterInfoChange,lockChanges:this.state.locked,calculateSkillPointsRemaining:this.calculateSkillPointsRemaining}),r.a.createElement(p.a,null,r.a.createElement(K,{resources:this.state.resources,addResource:this.addResource,removeResource:this.removeResource,lockChanges:this.state.locked,MAGIC_POINT_COST:this.state.MAGIC_POINT_COST,PRODUCTION_POINT_COST:this.state.PRODUCTION_POINT_COST,CRAFT_POINT_COST:this.state.CRAFT_POINT_COST}),this.state.loadingSkills?r.a.createElement("div",null,"Loading skills. Please wait..."):r.a.createElement(d.a,null,r.a.createElement(g.a,{className:"skilltree"},r.a.createElement("div",{className:"combat"},r.a.createElement(W,{treeName:"Combat",skills:this.state.combat,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked})),r.a.createElement("div",{className:"general"},r.a.createElement(W,{treeName:"General",skills:this.state.general,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,ockChanges:this.state.locked})),r.a.createElement("div",{className:"nature"},r.a.createElement(W,{treeName:"Nature",skills:this.state.nature,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked})),r.a.createElement("div",{className:"necromancy"},r.a.createElement(W,{treeName:"Necromancy",skills:this.state.necromancy,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked}))),r.a.createElement(g.a,{className:"skilltree"},r.a.createElement("div",{className:"production"},r.a.createElement(W,{treeName:"Production",skills:this.state.production,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked})),r.a.createElement("div",{className:"aegis"},r.a.createElement(W,{treeName:"Aegis",skills:this.state.aegis,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked})),r.a.createElement("div",{className:"battle"},r.a.createElement(W,{treeName:"Battle",skills:this.state.battle,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked}))),r.a.createElement(g.a,{className:"skilltree"},r.a.createElement("div",{className:"roleplaying"},r.a.createElement(W,{treeName:"Roleplaying",skills:this.state.roleplaying,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked})),r.a.createElement("div",{className:"compulsion"},r.a.createElement(W,{treeName:"Compulsion",skills:this.state.compulsion,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked})),r.a.createElement("div",{className:"restoration"},r.a.createElement(W,{treeName:"Restoration",skills:this.state.restoration,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked})),r.a.createElement("div",{className:"enchantment"},r.a.createElement(W,{treeName:"Enchantment",skills:this.state.enchantment,playerSkills:this.state.playerHasSkill,playerCheckedASkillBox:this.playerCheckedASkillBox,lockChanges:this.state.locked})))))),r.a.createElement(Z.a,{path:"/register",exact:!0,component:$}),r.a.createElement(Z.a,{path:"/forgot",exact:!0,component:te}),r.a.createElement(Z.a,{path:"/newpass:token",exact:!0,component:ee}))))}}]),t}(r.a.Component),le=Object(v.e)()(re),ce=a(65),se=a.n(ce),oe={position:v.b.TOP_CENTER,timeout:3e3,offset:"30px",transition:v.c.FADE};Object(l.render)(r.a.createElement((function(){return r.a.createElement(v.a,Object.assign({template:se.a},oe),r.a.createElement(le,null))}),null),document.getElementById("root"))},65:function(e,t,a){var n,r=(n=a(0))&&"object"===typeof n&&"default"in n?n.default:n,l=function(e){var t=e.color,a=e.pushRight,n=void 0===a||a,l=e.children;return r.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginRight:n?"20px":"0",minWidth:24}},l)},c=function(){return r.createElement(l,{color:"#2E9AFE"},r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),r.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"8"}))},s=function(){return r.createElement(l,{color:"#31B404"},r.createElement("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.createElement("polyline",{points:"22 4 12 14.01 9 11.01"}))},o=function(){return r.createElement(l,{color:"#FF0040"},r.createElement("circle",{cx:"12",cy:"12",r:"10"}),r.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),r.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"16"}))},i=function(){return r.createElement(l,{color:"#FFFFFF",pushRight:!1},r.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m={borderStyle:"solid",borderColor:"black",backgroundColor:"#333",color:"white",padding:"10px",borderRadius:"1px",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0px 2px 2px 2px rgba(0, 0, 0, 0.03)",fontFamily:"Arial",width:"250px",boxSizing:"border-box"},h={marginLeft:"20px",border:"none",backgroundColor:"transparent",cursor:"pointer",color:"#FFFFFF"};e.exports=function(e){var t=e.message,a=e.options,n=e.style,l=e.close;return r.createElement("div",{onClick:l,style:u({},m,n)},"info"===a.type&&r.createElement(c,null),"success"===a.type&&r.createElement(s,null),"error"===a.type&&r.createElement(o,null),r.createElement("span",{style:{flex:2,whiteSpace:"initial",textAlign:"center"}},t),r.createElement("button",{style:h},r.createElement(i,null)))}},66:function(e,t,a){e.exports=a(113)},68:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.4e1353c5.chunk.js.map